import{_ as r,c as a,o as t,ah as n,aw as i,ax as s,ay as o,az as l,aA as u,aB as d}from"./chunks/framework.CfqOJIEo.js";const _=JSON.parse(`{"title":"Ambi-like avec 240 LED WS2812B et une Teensy 2.0","description":"R√©alisation d'un syst√®me Ambi-like avec un ruban de 4m compos√© de 240 LED WS2812B et une Teensy 2.0 pour restituer le flux vid√©o de l'ordinateur sur les LED.","frontmatter":{"title":"Ambi-like avec 240 LED WS2812B et une Teensy 2.0","date":"2014-10-06T00:00:00.000Z","description":"R√©alisation d'un syst√®me Ambi-like avec un ruban de 4m compos√© de 240 LED WS2812B et une Teensy 2.0 pour restituer le flux vid√©o de l'ordinateur sur les LED.","tags":["Ambilight","WS2812B","Teensy","DIY"]},"headers":[],"relativePath":"en/posts/ambilight-ws2812b-teensy.md","filePath":"en/posts/ambilight-ws2812b-teensy.md"}`),p={name:"en/posts/ambilight-ws2812b-teensy.md"};function m(c,e,h,b,g,v){return t(),a("div",null,[...e[0]||(e[0]=[n('<h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to ‚ÄúIntroduction‚Äù">‚Äã</a></h2><p>J&#39;ai termin√© il y a quelques semaines la construction de mon bureau avec pc int√©gr√©. Je me devais d&#39;y ajouter un peu de couleurs !</p><p>J&#39;ai donc r√©alis√© un nouvel Ambi-like avec une ruban de 4m compos√© de 240 LED WS2812B soit 60 LED par m√®tre contrairement √† mon ancien Ambi-like de la t√©l√©vision qui lui est constitu√© d&#39;uniquement 50 LED WS2801.</p><p>J&#39;en ai profit√© pour passer sur de l&#39;Arduino-like (au lieu d&#39;un Raspbery Pi), sur les conseils de plusieurs personnes, mon choix s&#39;est port√© sur une Teensy 2.0 vendu par <a href="http://www.pjrc.com/store/teensy.html" target="_blank" rel="noreferrer">PJRC</a> et qui permet de commander facilement un syst√®me Ambi-like.</p><p>Le but principal ici est de pouvoir restituer le flux vid√©o de l&#39;ordinateur sur les LED, on verra qu&#39;il est √©galement possible de capturer le sons et √©galement mettre des couleurs dynamiques d&#39;ambiance.</p><h2 id="pourquoi-ce-choix-de-materiel" tabindex="-1">Pourquoi ce choix de mat√©riel ? <a class="header-anchor" href="#pourquoi-ce-choix-de-materiel" aria-label="Permalink to ‚ÄúPourquoi ce choix de mat√©riel ?‚Äù">‚Äã</a></h2><p>Un syst√®me Ambi-like se fait g√©n√©ralement avec des LED WS2801 car elles sont adressables contrairement aux LED WS2811/WS2812. J&#39;avoue avoir achet√© ce ruban sur un coup de t√™te (le nombre de LED au m√®tre m&#39;a attir√©) sans avoir v√©rifi√© la compatibilit√© avec les syst√®mes Ambi-like du moment‚Ä¶ Mais j&#39;aime les d√©fis et surtout les nouvelles choses üòÉ</p><p><img src="'+i+'" alt="Ruban WS2812"></p><p>Pour le choix du contr√¥leur, j&#39;avais d√©j√† jou√© avec un Raspeberry Pi pr√©c√©demment, je voulais donc tenter l&#39;aventure sur un autre p√©riph√©rique. Un Arduino correspond tr√®s bien au besoin, c&#39;est petit, poss√®de une faible consommation √©nerg√©tique et il existe plusieurs syst√®mes d&#39;Ambi-like d√©di√©s. J&#39;ai donc command√© une Tensy 2.0 qui est encore plus petite qu&#39;un Arduino Uno et poss√®de une plus grande puissance de calcul (√ßa se r√©v√©lera important √©tant donn√© que mes LED ne sont pas adressables).</p><p><img src="'+s+'" alt="Teensy 2.0"></p><h2 id="programmation" tabindex="-1">Programmation <a class="header-anchor" href="#programmation" aria-label="Permalink to ‚ÄúProgrammation‚Äù">‚Äã</a></h2><p>J&#39;ai donc d√©couvert la programmation sous Arduino gr√¢ce √† cette Teensy 2.0. A vrai dire avec quelques connaissance en C, c&#39;est relativement simple !</p><p>Il existe un logiciel de d√©veloppement d√©di√© pour les Arduino, √† <a href="http://arduino.cc/en/Main/Software" target="_blank" rel="noreferrer">t√©l√©charger ici</a>, par d√©faut Arduino ne prend pas en charge les Teensy, il faut donc t√©l√©charger et installer sur votre installation d&#39;Arduino le &#39;patch&#39; <a href="https://www.pjrc.com/teensy/td_download.html" target="_blank" rel="noreferrer">Teensyduino</a>.</p><p>Il embarque nativement des libraires de d√©veloppement, √† utiliser selon la fonction que vous voulez donner √† votre syst√®me.</p><p>Ici, nous voulons commander notre ruban √† LED via notre ordinateur en passant par la Teensy. Pour cela nous utiliserons deux logiciels concurrent nomm√©s <a href="http://www.ambibox.ru/en/index.php/Main_Page" target="_blank" rel="noreferrer">Ambibox</a> et <a href="http://lightpack.tv/downloads" target="_blank" rel="noreferrer">Prismatik</a>.</p><p>Ces deux logiciels peuvent fonctionner en communiquant avec un syst√®me <a href="http://www.adafruit.com/products/461" target="_blank" rel="noreferrer">Adalight</a> (embarqu√© sur la Teensy).</p><p>Le probl√®me, c&#39;est qu&#39;Adalight est d√©velopp√© pour fonctionner avec des LED 2801. Apr√®s quelques heures de recherches, j&#39;ai r√©ussi √† trouver un <a href="https://code.google.com/p/adalight-ws2812/source/browse/0.9?spec=svn2&amp;r=2" target="_blank" rel="noreferrer">fork d&#39;Adalight</a> fonctionnant avec des LED WS2812.</p><p>Ce fork d&#39;Adalight repose malheureusement sur une ancienne librairie FastSPI_LED2 (permettant de commander des LED WS2811/WS2812), qui a √©volu√©e et se trouve maintenant sous le nom FastLED (disponible sous l&#39;√©diteur Arduino).</p><p>J&#39;ai donc r√©solu mon probl√®me en modifiant l√©g√®rement le code du fork pour utiliser la derni√®re version de la librairie FastLED, ma version disponible sur <a href="https://github.com/Wifsimster/adalight_ws2812" target="_blank" rel="noreferrer">Github</a> (derni√®re mise √† jour 22/11/2015).</p><p>Je ne vais pas vous expliquer comment charger le programme sur la Teensy, c&#39;est tr√®s simple et repose sur le m√™me principe que n&#39;importe quel Arduino, pour plus d&#39;informations, <a href="http://www.pjrc.com/teensy/loader_vista.html" target="_blank" rel="noreferrer">voir ici</a>.</p><h2 id="montage" tabindex="-1">Montage <a class="header-anchor" href="#montage" aria-label="Permalink to ‚ÄúMontage‚Äù">‚Äã</a></h2><p>J&#39;ai donc simplement d√©coup√© des bandes pour chaque longueur des √©crans, bien penser √† respecter le sens des fl√®ches du ruban (pour le signal).</p><p>J&#39;ai reli√© chaque bandes bout √† bout par trois fils soud√©s de chaque c√¥t√© et reli√© mon alimentation 5v 8A en entr√©e et sortie du ruban (pr√©f√©r√© plusieurs points d&#39;alimentation sur votre ruban).</p><p><img src="'+o+'" alt="Montage 1"></p><p>Comme vous pouvez le voir ci-dessous, j&#39;ai connect√© les trois fils du ruban sur les ports VCC, GRD B1 de la Teensy 2.0. Le port B1 est param√©trable dans ma version de l&#39;Adalight.</p><p><img src="'+l+'" alt="Montage 2"></p><h2 id="communication-avec-adalight" tabindex="-1">Communication avec Adalight <a class="header-anchor" href="#communication-avec-adalight" aria-label="Permalink to ‚ÄúCommunication avec Adalight‚Äù">‚Äã</a></h2><p>Adalight est tr√®s r√©pandu et est de plus en plus reconnu par les logiciels Ambilight. J&#39;ai donc test√© les deux plus connus du moment, Prismatik et Ambibox !</p><p><img src="'+u+'" alt="Communication"></p><h2 id="update-22-11-2015" tabindex="-1">Update - 22/11/2015 <a class="header-anchor" href="#update-22-11-2015" aria-label="Permalink to ‚ÄúUpdate - 22/11/2015‚Äù">‚Äã</a></h2><p>Suite √† mon d√©m√©nagement, j&#39;ai d√ª me remettre dans la programmation de la Teensy et je viens donc d&#39;en profiter pour mettre √† jour ma version d&#39;Adalight.</p><p>Le plus gros probl√®me que j&#39;ai eu apr√®s tout ce temps (et un nouvelle installation de Windows) c&#39;est la configuration de Prismatik !</p><p>Penser √† bien installer les drivers pour votre Teensy, les drivers sont embarqu√©s dans le &#39;patch&#39; <a href="https://www.pjrc.com/teensy/td_download.html" target="_blank" rel="noreferrer">Teensyduino</a> (voir au d√©but de l&#39;article) et par la suite r√©cup√©r√© le port dans la gestion de vos p√©riph√©riques Windows.</p><p><img src="'+d+'" alt="P√©riph√©riques"></p>',34)])])}const y=r(p,[["render",m]]);export{_ as __pageData,y as default};
