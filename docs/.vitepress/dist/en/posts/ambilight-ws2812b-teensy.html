<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ambi-like avec 240 LED WS2812B et une Teensy 2.0 | VitePress</title>
    <meta name="description" content="R√©alisation d'un syst√®me Ambi-like avec un ruban de 4m compos√© de 240 LED WS2812B et une Teensy 2.0 pour restituer le flux vid√©o de l'ordinateur sur les LED.">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style.BgQj3CDO.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CHZW5mh9.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.n8570wft.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CfqOJIEo.js">
    <link rel="modulepreload" href="/assets/en_posts_ambilight-ws2812b-teensy.md.BNTms2gY.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1df9f90f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-331ec75c></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-331ec75c>Skip to content</a><!--]--><!----><header class="VPNav" data-v-1df9f90f data-v-da52a441><div class="VPNavBar" data-v-da52a441 data-v-70946a35><div class="wrapper" data-v-70946a35><div class="container" data-v-70946a35><div class="title" data-v-70946a35><div class="VPNavBarTitle" data-v-70946a35 data-v-1e38c6bc><a class="title" href="/" data-v-1e38c6bc><!--[--><!--]--><!----><span data-v-1e38c6bc>VitePress</span><!--[--><!--]--></a></div></div><div class="content" data-v-70946a35><div class="content-body" data-v-70946a35><!--[--><!--]--><div class="VPNavBarSearch search" data-v-70946a35><!----></div><!----><!----><div class="VPNavBarAppearance appearance" data-v-70946a35 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-70946a35 data-v-bf2fac68 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-42cb505d><span class="vpi-more-horizontal icon" data-v-42cb505d></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><!----><!--[--><!--[--><!----><div class="group" data-v-bf2fac68><div class="item appearance" data-v-bf2fac68><p class="label" data-v-bf2fac68>Appearance</p><div class="appearance-action" data-v-bf2fac68><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bf2fac68 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-70946a35 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-70946a35><div class="divider-line" data-v-70946a35></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-1df9f90f data-v-db738f89><div class="container" data-v-db738f89><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-db738f89 data-v-0bf0e06f><button data-v-0bf0e06f>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-1df9f90f data-v-c87f25bf><div class="VPDoc has-aside" data-v-c87f25bf data-v-7011f0d8><!--[--><!--]--><div class="container" data-v-7011f0d8><div class="aside" data-v-7011f0d8><div class="aside-curtain" data-v-7011f0d8></div><div class="aside-container" data-v-7011f0d8><div class="aside-content" data-v-7011f0d8><div class="VPDocAside" data-v-7011f0d8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-60d5052e><div class="content" data-v-60d5052e><div class="outline-marker" data-v-60d5052e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-60d5052e>On this page</div><ul class="VPDocOutlineItem root" data-v-60d5052e data-v-1ce71065><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7011f0d8><div class="content-container" data-v-7011f0d8><!--[--><!--]--><main class="main" data-v-7011f0d8><div style="position:relative;" class="vp-doc _en_posts_ambilight-ws2812b-teensy" data-v-7011f0d8><div><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to ‚ÄúIntroduction‚Äù">‚Äã</a></h2><p>J&#39;ai termin√© il y a quelques semaines la construction de mon bureau avec pc int√©gr√©. Je me devais d&#39;y ajouter un peu de couleurs !</p><p>J&#39;ai donc r√©alis√© un nouvel Ambi-like avec une ruban de 4m compos√© de 240 LED WS2812B soit 60 LED par m√®tre contrairement √† mon ancien Ambi-like de la t√©l√©vision qui lui est constitu√© d&#39;uniquement 50 LED WS2801.</p><p>J&#39;en ai profit√© pour passer sur de l&#39;Arduino-like (au lieu d&#39;un Raspbery Pi), sur les conseils de plusieurs personnes, mon choix s&#39;est port√© sur une Teensy 2.0 vendu par <a href="http://www.pjrc.com/store/teensy.html" target="_blank" rel="noreferrer">PJRC</a> et qui permet de commander facilement un syst√®me Ambi-like.</p><p>Le but principal ici est de pouvoir restituer le flux vid√©o de l&#39;ordinateur sur les LED, on verra qu&#39;il est √©galement possible de capturer le sons et √©galement mettre des couleurs dynamiques d&#39;ambiance.</p><h2 id="pourquoi-ce-choix-de-materiel" tabindex="-1">Pourquoi ce choix de mat√©riel ? <a class="header-anchor" href="#pourquoi-ce-choix-de-materiel" aria-label="Permalink to ‚ÄúPourquoi ce choix de mat√©riel ?‚Äù">‚Äã</a></h2><p>Un syst√®me Ambi-like se fait g√©n√©ralement avec des LED WS2801 car elles sont adressables contrairement aux LED WS2811/WS2812. J&#39;avoue avoir achet√© ce ruban sur un coup de t√™te (le nombre de LED au m√®tre m&#39;a attir√©) sans avoir v√©rifi√© la compatibilit√© avec les syst√®mes Ambi-like du moment‚Ä¶ Mais j&#39;aime les d√©fis et surtout les nouvelles choses üòÉ</p><p><img src="/images/strip_rgb_ws28121.jpg" alt="Ruban WS2812"></p><p>Pour le choix du contr√¥leur, j&#39;avais d√©j√† jou√© avec un Raspeberry Pi pr√©c√©demment, je voulais donc tenter l&#39;aventure sur un autre p√©riph√©rique. Un Arduino correspond tr√®s bien au besoin, c&#39;est petit, poss√®de une faible consommation √©nerg√©tique et il existe plusieurs syst√®mes d&#39;Ambi-like d√©di√©s. J&#39;ai donc command√© une Tensy 2.0 qui est encore plus petite qu&#39;un Arduino Uno et poss√®de une plus grande puissance de calcul (√ßa se r√©v√©lera important √©tant donn√© que mes LED ne sont pas adressables).</p><p><img src="/images/teensy_2.jpg" alt="Teensy 2.0"></p><h2 id="programmation" tabindex="-1">Programmation <a class="header-anchor" href="#programmation" aria-label="Permalink to ‚ÄúProgrammation‚Äù">‚Äã</a></h2><p>J&#39;ai donc d√©couvert la programmation sous Arduino gr√¢ce √† cette Teensy 2.0. A vrai dire avec quelques connaissance en C, c&#39;est relativement simple !</p><p>Il existe un logiciel de d√©veloppement d√©di√© pour les Arduino, √† <a href="http://arduino.cc/en/Main/Software" target="_blank" rel="noreferrer">t√©l√©charger ici</a>, par d√©faut Arduino ne prend pas en charge les Teensy, il faut donc t√©l√©charger et installer sur votre installation d&#39;Arduino le &#39;patch&#39; <a href="https://www.pjrc.com/teensy/td_download.html" target="_blank" rel="noreferrer">Teensyduino</a>.</p><p>Il embarque nativement des libraires de d√©veloppement, √† utiliser selon la fonction que vous voulez donner √† votre syst√®me.</p><p>Ici, nous voulons commander notre ruban √† LED via notre ordinateur en passant par la Teensy. Pour cela nous utiliserons deux logiciels concurrent nomm√©s <a href="http://www.ambibox.ru/en/index.php/Main_Page" target="_blank" rel="noreferrer">Ambibox</a> et <a href="http://lightpack.tv/downloads" target="_blank" rel="noreferrer">Prismatik</a>.</p><p>Ces deux logiciels peuvent fonctionner en communiquant avec un syst√®me <a href="http://www.adafruit.com/products/461" target="_blank" rel="noreferrer">Adalight</a> (embarqu√© sur la Teensy).</p><p>Le probl√®me, c&#39;est qu&#39;Adalight est d√©velopp√© pour fonctionner avec des LED 2801. Apr√®s quelques heures de recherches, j&#39;ai r√©ussi √† trouver un <a href="https://code.google.com/p/adalight-ws2812/source/browse/0.9?spec=svn2&amp;r=2" target="_blank" rel="noreferrer">fork d&#39;Adalight</a> fonctionnant avec des LED WS2812.</p><p>Ce fork d&#39;Adalight repose malheureusement sur une ancienne librairie FastSPI_LED2 (permettant de commander des LED WS2811/WS2812), qui a √©volu√©e et se trouve maintenant sous le nom FastLED (disponible sous l&#39;√©diteur Arduino).</p><p>J&#39;ai donc r√©solu mon probl√®me en modifiant l√©g√®rement le code du fork pour utiliser la derni√®re version de la librairie FastLED, ma version disponible sur <a href="https://github.com/Wifsimster/adalight_ws2812" target="_blank" rel="noreferrer">Github</a> (derni√®re mise √† jour 22/11/2015).</p><p>Je ne vais pas vous expliquer comment charger le programme sur la Teensy, c&#39;est tr√®s simple et repose sur le m√™me principe que n&#39;importe quel Arduino, pour plus d&#39;informations, <a href="http://www.pjrc.com/teensy/loader_vista.html" target="_blank" rel="noreferrer">voir ici</a>.</p><h2 id="montage" tabindex="-1">Montage <a class="header-anchor" href="#montage" aria-label="Permalink to ‚ÄúMontage‚Äù">‚Äã</a></h2><p>J&#39;ai donc simplement d√©coup√© des bandes pour chaque longueur des √©crans, bien penser √† respecter le sens des fl√®ches du ruban (pour le signal).</p><p>J&#39;ai reli√© chaque bandes bout √† bout par trois fils soud√©s de chaque c√¥t√© et reli√© mon alimentation 5v 8A en entr√©e et sortie du ruban (pr√©f√©r√© plusieurs points d&#39;alimentation sur votre ruban).</p><p><img src="/images/IMG_20140921_1522391-1050x590.jpg" alt="Montage 1"></p><p>Comme vous pouvez le voir ci-dessous, j&#39;ai connect√© les trois fils du ruban sur les ports VCC, GRD B1 de la Teensy 2.0. Le port B1 est param√©trable dans ma version de l&#39;Adalight.</p><p><img src="/images/IMG_20140921_1523001.jpg" alt="Montage 2"></p><h2 id="communication-avec-adalight" tabindex="-1">Communication avec Adalight <a class="header-anchor" href="#communication-avec-adalight" aria-label="Permalink to ‚ÄúCommunication avec Adalight‚Äù">‚Äã</a></h2><p>Adalight est tr√®s r√©pandu et est de plus en plus reconnu par les logiciels Ambilight. J&#39;ai donc test√© les deux plus connus du moment, Prismatik et Ambibox !</p><p><img src="/images/IMG_20140921_1531451-1050x590.jpg" alt="Communication"></p><h2 id="update-22-11-2015" tabindex="-1">Update - 22/11/2015 <a class="header-anchor" href="#update-22-11-2015" aria-label="Permalink to ‚ÄúUpdate - 22/11/2015‚Äù">‚Äã</a></h2><p>Suite √† mon d√©m√©nagement, j&#39;ai d√ª me remettre dans la programmation de la Teensy et je viens donc d&#39;en profiter pour mettre √† jour ma version d&#39;Adalight.</p><p>Le plus gros probl√®me que j&#39;ai eu apr√®s tout ce temps (et un nouvelle installation de Windows) c&#39;est la configuration de Prismatik !</p><p>Penser √† bien installer les drivers pour votre Teensy, les drivers sont embarqu√©s dans le &#39;patch&#39; <a href="https://www.pjrc.com/teensy/td_download.html" target="_blank" rel="noreferrer">Teensyduino</a> (voir au d√©but de l&#39;article) et par la suite r√©cup√©r√© le port dans la gestion de vos p√©riph√©riques Windows.</p><p><img src="/images/periph.png" alt="P√©riph√©riques"></p></div></div></main><footer class="VPDocFooter" data-v-7011f0d8 data-v-e257564d><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"archives.md\":\"DSgcYjdv\",\"en_archives.md\":\"DRyZ2kNH\",\"en_index.md\":\"DrYis1Ws\",\"en_posts_affichage-i2c-esp8266.md\":\"kpqStCER\",\"en_posts_ambilight-ws2801-raspberry-pi-hyperion.md\":\"stVT2UdK\",\"en_posts_ambilight-ws2812b-teensy.md\":\"BNTms2gY\",\"en_posts_bureau-sur-mesure-pc-integre.md\":\"DIPj58dp\",\"en_posts_communication-sans-fil-esp8266.md\":\"D3JZqUSJ\",\"en_posts_controle-prise-chacon-raspberry-pi.md\":\"C2ZjJOON\",\"en_posts_distributeur-croquettes-jeedom-esp8266.md\":\"Dsh-Jd4n\",\"en_posts_flash-esp8266.md\":\"BjHvOGCm\",\"en_posts_luminosite-jeedom-esp8266.md\":\"BZFmwJkT\",\"en_posts_temperature-pression-bmp180-jeedom-esp8266.md\":\"Bx1zHj52\",\"fr_archives.md\":\"BTktdli9\",\"fr_index.md\":\"DZ1FCJ1I\",\"index.md\":\"Co46_gQ7\",\"posts_affichage-i2c-esp8266.md\":\"BRWp_Lho\",\"posts_ambilight-ws2801-raspberry-pi-hyperion.md\":\"DSqWP-U3\",\"posts_ambilight-ws2812b-teensy.md\":\"YqTWLNo1\",\"posts_bureau-sur-mesure-pc-integre.md\":\"BVIKayzG\",\"posts_communication-sans-fil-esp8266.md\":\"xmQsQfEq\",\"posts_controle-prise-chacon-raspberry-pi.md\":\"Vi2kY9PM\",\"posts_distributeur-croquettes-jeedom-esp8266.md\":\"D-Hkia3T\",\"posts_flash-esp8266.md\":\"CxIYpqpB\",\"posts_luminosite-jeedom-esp8266.md\":\"kbFzf-fZ\",\"posts_temperature-pression-bmp180-jeedom-esp8266.md\":\"Df7el_WS\",\"tags_ambilight.md\":\"474R9aPC\",\"tags_diy.md\":\"CmrHIPzl\",\"tags_esp8266.md\":\"D8s_jdw-\",\"tags_jeedom.md\":\"CKR6Ct1k\",\"tags_nodemcu.md\":\"CKztGFUo\",\"tags_raspberry-pi.md\":\"CrskyZz3\",\"tags_teensy.md\":\"BXpgWZX6\",\"tags_ws2801.md\":\"BpXKNEyu\",\"tags_ws2812b.md\":\"BA3QvSIE\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>